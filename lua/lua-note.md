
语法细节
-----------------------------------
_[大写字母] ：保留标识符，如

变量默认是全局的，除非用 local 指明

删除一个全局变量: a = nil

#/usr/bin/env lua 

false nil 为假，除此之外都为真

交互shell 直接输出结果： > =sin(2)

Lua 字符串是不可变值(immutable values)

.. : 字符连接操作

\# : 获取字符串长度

数组第一个元素和最后一个元素都为 nil

在Lua中还可以通过[[ all strings ]]的方式来禁用[[ ]]中转义字符，如：
    page = [[ <html> <head> <title> An Html Page </title> </head> ]]
    如果两个方括号中包含这样的内容：a = b[c[i]]，这样将会导致Lua的误解析，因此在这种情况下，我们可以将其改为[===[ 和 ]===]的形式，从而避免了误解析的发生。


userdata ： 可以将任意的C语言数据存储到 Lua 变量中

表达式： 可以包含 函数 和  table 构造式

取模： a%b = a - floor(a/b)*b
支持多重赋值
do - end ：程序中将交互式代码当做代码块。

Tips

x = x or 7 # if not x then x = 7 end

(x > y) and x or y # 与 C 语言 x > y ? x : y 相同

x,y = y,x # swap(x,y)

函数
-----------------------------------
可以当做变量、参数、返回值

多重返回（multiple result）
* 表达式的一部分 保留第一个返回值
* 一系列表达式最后一个元素  全部返回值
* 单独的语句  丢弃所有返回值

变长参数
* 之前可以包含多个固定参数

unpack

具名实参：
默认实参
函数(只有一个table 参数，函数可以省略"()"）

词法域（Lexical Scoping）：闭包
第一类值： 函数与类型有相同的权利

高阶函数（higher-order function）: 匿名函数为参数

非局部变量（non-local variable）:






数据结构机制
-----------------------------------
table 引用系统

1. 引用语义

例如：
	a = {}
	a["x"] = 10
	b = a
	b["x"] = 20
	print(a["x"]) --20

2. a.x = a["x"] ~= a[x]


迭代器
-----------------------------------


关键理解关联数组(associative array)

不要在C函数之外使用在C函数内获得的指向Lua字符串的指针

栈：栈底 索引 1  
    栈顶 索引 -1 lua_gettop(L)
    
    
元表
1. 类型检查，接口校验
2. 

元表存储
1. 注册表 : 几个模块间共享数据
2. 环境 ： 一个模块的私有数据
3. upvalue : 与特定函数相关联的 Lua 值



